@page "/products"
@using MudBlazor

<PageTitle>Produkteübersicht</PageTitle>

<MudGrid Style="height:100vh;">
    <!-- Left Sidebar -->
    <MudItem xs="12" sm="3" Style="height:100%;">
        <MudPaper Class="pa-4" Style="height:100%;">
            <MudText Typo="Typo.h6" Class="mb-2">Categories</MudText>
                <MudTreeView T="Category">
        <!-- New Products -->
        <MudTreeViewItem Text="Aktuelle Produkte" Expanded="true">
            @foreach (var sub in NewCategories)
            {
                <MudTreeViewItem Text="@sub.Name" OnClick="@(() => OnCategorySelected(sub.Name))" />
            }
        </MudTreeViewItem>

        <!-- Old Products -->
        <MudTreeViewItem Text="Alte Produkte" Expanded="true">
            @foreach (var sub in OldCategories)
            {
                <MudTreeViewItem Text="@sub.Name" OnClick="@(() => OnCategorySelected(sub.Name))" />
            }
        </MudTreeViewItem>
    </MudTreeView>

        </MudPaper>
    </MudItem>

    <!-- Main Content -->
    <MudItem xs="12" sm="9">
        @if (FilteredProducts.Any())
        {
            <MudText Typo="Typo.h5" Class="mb-4"></MudText>

            <MudCarousel TData="object" Style="height:75%;">
                @foreach (var product in FilteredProducts)
                {
                    <MudCarouselItem >
                        <MudCard Style="width: 250px; margin: auto; height: 50%;">
                            <MudCardMedia Image="@product.ImageUrl" />
                            <MudCardContent>
                                <MudText Typo="Typo.subtitle1" Align="Align.Center">@product.Name</MudText>
                            </MudCardContent>
                            <MudButton Variant="Variant.Filled" Color="Color.Info" Href="@product.DatasheetUrl" Target="_blank">Datenblatt</MudButton><br />
                                <MudButton Variant="Variant.Outlined" Color="Color.Info" Href="@product.WebsiteUrl" Target="_blank">Anleitungen</MudButton>
                        </MudCard>
                    </MudCarouselItem>
                }
            </MudCarousel>
        }
        else
        {
            <MudText Typo="Typo.body1" Color="Color.Info">
                Wählen Sie eine Prouktkategorie aus.
            </MudText>
        }
    </MudItem>
</MudGrid>



@code {
    private List<Category> NewCategories = new();
    private List<Category> OldCategories = new();

    private List<Product> AllProducts = new();
    private List<Product> FilteredProducts = new();

    private string? SelectedCategory;

    protected override void OnInitialized()
    {
        // Define categories
        NewCategories = new()
        {
            new Category { Name = "Taster" },
            new Category { Name = "Aktoren" },
            new Category { Name = "Sensoren" },
            new Category { Name = "Systemgeräte" }
        };

        OldCategories = new()
        {
            new Category { Name = "Taster (alt)" },
            new Category { Name = "Aktoren (alt)" },
            new Category { Name = "Sensoren (alt)" },
            new Category { Name = "Systemgeräte (alt)" }
        };

        // Define products
        AllProducts = new()
        {
            new Product { Name = "Taster RGB G2", ImageUrl = "images/taster1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Taster" },
            new Product { Name = "Switch 8 G2", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren" },
            new Product { Name = "Motor 4x230V G2", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren" },
            new Product { Name = "Motor 4x24V G2", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren" },
            new Product { Name = "Dim 4x300VA", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren" },
            new Product { Name = "Motor 4x600VA", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren" },
            new Product { Name = "Motor 4xDali", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren" },

           new Product { Name = "In 04 LC G2", ImageUrl = "images/sensor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Sensoren" },


            new Product { Name = "Switch 8", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren (alt)" },
            new Product { Name = "Motor 4x230 ", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren (alt)" },
            new Product { Name = "Motor 4x24V", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren (alt)" },

            new Product { Name = "NOX dimmer-0401.5", ImageUrl = "images/aktor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Aktoren (alt)" },



                        new Product { Name = "Taster RGB G1", ImageUrl = "images/taster1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Taster (alt)" },


            new Product { Name = "In 04", ImageUrl = "images/sensor1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Sensoren (alt)" },

            new Product { Name = "RTI Touchpanel KX 7", ImageUrl = "images/system1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Systemgeräte (alt)" },
            new Product { Name = "RTI Touchpanel KA8", ImageUrl = "images/system1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Systemgeräte (alt)" },
            new Product { Name = "RTI Touchpanel KX 10", ImageUrl = "images/system1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Systemgeräte (alt)" },
            new Product { Name = "Panasonic Touchpanel", ImageUrl = "images/system1.jpg", DatasheetUrl = "#", WebsiteUrl = "#", Category = "Systemgeräte (alt)" }


        };
    }

    private void OnCategorySelected(string categoryName)
    {
        SelectedCategory = categoryName;
        FilteredProducts = AllProducts
            .Where(p => p.Category == categoryName)
            .ToList();
    }

    public class Category
    {
        public string Name { get; set; } = "";
    }

    public class Product
    {
        public string Name { get; set; } = "";
        public string ImageUrl { get; set; } = "";
        public string DatasheetUrl { get; set; } = "";
        public string WebsiteUrl { get; set; } = "";
        public string Category { get; set; } = "";
    }
}
